{"ast":null,"code":"import _classCallCheck from\"/home/andres/Desktop/practices/facerecognition/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/andres/Desktop/practices/facerecognition/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/andres/Desktop/practices/facerecognition/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/andres/Desktop/practices/facerecognition/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./App.css';import Navigation from'./components/Navigation/Navigation';import Logo from'./components/Logo/Logo';import ImageLinkForm from'./components/ImageLinkForm/ImageLinkForm';import FaceRecognition from'./components/FaceRecognition/FaceRecognition';import\"tachyons\";import Particles from'react-particles-js';import Rank from'./components/Rank/Rank';import SignIn from'./components/SignIn/SignIn';import SignUp from'./components/SignUp/SignUp';import Clarifai from'clarifai';var app=new Clarifai.App({apiKey:'a5859fd113154c43a55a9bd841ca1987'});var particlesOption={particles:{number:{value:30,density:{enable:true,value_area:120}}}};var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.loadUser=function(data){_this.setState({user:{id:data.id,name:data.name,email:data.email,entries:data.entries,joined:data.joined}});};_this.onClickSign=function(something){something===\"signout\"?_this.setState({route:\"signout\",imageURL:\"\"}):something===\"signin\"?_this.setState({route:\"signin\"}):_this.setState({route:\"signup\"});};_this.onInputChange=function(event){_this.setState({input:event.target.value});};_this.calculateFaceLocation=function(data){var clarifaiFace=data.outputs[0].data.regions[0].region_info.bounding_box;var image=document.getElementById(\"image\");var widthImage=Number(image.width);var heightImage=Number(image.height);return{topRow:clarifaiFace.top_row*heightImage,rightCol:widthImage-clarifaiFace.right_col*widthImage,bottomRow:heightImage-clarifaiFace.bottom_row*heightImage,leftCol:clarifaiFace.left_col*widthImage};};_this.displayFaceBox=function(box){_this.setState({box:box});};_this.onButtonSubmit=function(event){_this.setState({imageURL:_this.state.input});fetch('https://immense-sierra-90858.herokuapp.com/imageurl',{method:'post',headers:{'Content-Type':'application/json'},body:JSON.stringify({input:_this.state.input})}).then(function(response){return response.json();}).then(function(response){if(response){fetch('https://immense-sierra-90858.herokuapp.com/image',{method:'put',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:_this.state.user.id})}).then(function(response){return response.json();}).then(function(count){_this.setState(Object.assign(_this.state.user,{entries:count}));}).catch(console.log);}_this.displayFaceBox(_this.calculateFaceLocation(response));}).catch(function(err){return console.log(\"Error\",err);});};_this.signInForm=function(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(SignIn,{loadUser:_this.loadUser,onClickSign:_this.onClickSign}));};_this.signUpForm=function(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(SignUp,{loadUser:_this.loadUser,onClickSign:_this.onClickSign}));};_this.mainPage=function(){var _this$state=_this.state,box=_this$state.box,imageURL=_this$state.imageURL;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Navigation,{onClickSign:_this.onClickSign}),/*#__PURE__*/React.createElement(Logo,null),/*#__PURE__*/React.createElement(Rank,{name:_this.state.user.name,entries:_this.state.user.entries}),/*#__PURE__*/React.createElement(ImageLinkForm,{onInputChange:_this.onInputChange,onButtonSubmit:_this.onButtonSubmit}),/*#__PURE__*/React.createElement(FaceRecognition,{box:box,image:imageURL}));};_this.state={input:\"\",imageURL:\"\",box:{},route:\"signout\",user:{id:\"\",name:\"\",email:\"\",entries:0,joined:\"\"}};return _this;}_createClass(App,[{key:\"render\",value:function render(){var route=this.state.route;return/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",flexDirection:\"column\"}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Particles,{className:\"particles\",params:particlesOption}),route===\"signin\"?this.mainPage():route===\"signout\"?this.signInForm():this.signUpForm()));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/home/andres/Desktop/practices/facerecognition/frontend/src/App.js"],"names":["React","Component","Navigation","Logo","ImageLinkForm","FaceRecognition","Particles","Rank","SignIn","SignUp","Clarifai","app","App","apiKey","particlesOption","particles","number","value","density","enable","value_area","loadUser","data","setState","user","id","name","email","entries","joined","onClickSign","something","route","imageURL","onInputChange","event","input","target","calculateFaceLocation","clarifaiFace","outputs","regions","region_info","bounding_box","image","document","getElementById","widthImage","Number","width","heightImage","height","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","leftCol","left_col","displayFaceBox","box","onButtonSubmit","state","fetch","method","headers","body","JSON","stringify","then","response","json","count","Object","assign","catch","console","log","err","signInForm","signUpForm","mainPage","display","flexDirection"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport Navigation from './components/Navigation/Navigation';\nimport Logo from './components/Logo/Logo';\nimport ImageLinkForm from './components/ImageLinkForm/ImageLinkForm';\nimport FaceRecognition from './components/FaceRecognition/FaceRecognition';\nimport \"tachyons\";\nimport Particles from 'react-particles-js';\nimport Rank from './components/Rank/Rank';\nimport SignIn from './components/SignIn/SignIn';\nimport SignUp from './components/SignUp/SignUp';\nimport Clarifai from 'clarifai';\n\nconst app = new Clarifai.App({\n  apiKey: 'a5859fd113154c43a55a9bd841ca1987'\n});\n\nconst particlesOption = {\n  particles: {\n    number: {\n      value: 30,\n      density: {\n        enable: true,\n        value_area: 120,\n      }\n    }\n  }\n}\n\nclass App extends Component {\n  constructor(){\n    super()\n    this.state = {\n      input: \"\",\n      imageURL: \"\",\n      box: {},\n      route: \"signout\",\n      user: {\n        id: \"\",\n        name: \"\",\n        email: \"\",\n        entries: 0,\n        joined: \"\"\n      }\n    }\n  }\n\n  loadUser = (data) => {\n    this.setState({ user: {\n          id: data.id,\n          name: data.name,\n          email: data.email,\n          entries: data.entries,\n          joined: data.joined\n      }\n    })\n  }\n\n  onClickSign = (something) => {\n    something === \"signout\"?\n      this.setState({ route: \"signout\", imageURL: \"\" }):\n      (something === \"signin\"?\n        this.setState({ route: \"signin\" }):\n        this.setState({ route: \"signup\" })) \n  }\n\n  onInputChange = (event) => {\n    this.setState({ input: event.target.value })\n  }\n\n  calculateFaceLocation = (data) => {\n    const clarifaiFace = data.outputs[0].data.regions[0].region_info.bounding_box;\n    const image = document.getElementById(\"image\");\n    const widthImage = Number(image.width);\n    const heightImage = Number(image.height);    \n\n    return {\n      topRow: clarifaiFace.top_row * heightImage,\n      rightCol: widthImage - (clarifaiFace.right_col * widthImage),\n      bottomRow: heightImage - (clarifaiFace.bottom_row * heightImage),\n      leftCol: clarifaiFace.left_col * widthImage, \n    }\n  }\n\n  displayFaceBox = (box) => {\n    this.setState({ box: box })\n  } \n\n  onButtonSubmit = (event) => {\n    this.setState({ imageURL: this.state.input })\n      fetch('https://immense-sierra-90858.herokuapp.com/imageurl', {\n        method: 'post',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          input: this.state.input\n        })            \n      })\n      .then(response => response.json())\n      .then(response => {\n        if(response) {\n          fetch('https://immense-sierra-90858.herokuapp.com/image', {\n            method: 'put',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              id: this.state.user.id\n            })            \n          })\n          .then(response => response.json())\n          .then(count => {\n            this.setState(Object.assign(this.state.user, { entries: count })\n            )\n          })\n          .catch(console.log);\n        }\n          this.displayFaceBox(this.calculateFaceLocation(response))\n      })\n      .catch(err => console.log(\"Error\", err))\n  }\n \n  signInForm = () => {\n    return(\n      <div>\n        <SignIn loadUser={this.loadUser} onClickSign={ this.onClickSign }/>\n      </div>  \n    );\n  }\n\n  signUpForm = () => {\n    return(\n      <div>\n        <SignUp loadUser={ this.loadUser } onClickSign={ this.onClickSign }/>              \n      </div>\n    );\n  }\n\n  mainPage = () => {\n    const { box, imageURL } = this.state;\n    return(\n      <div>\n        <Navigation onClickSign={ this.onClickSign }/>\n        <Logo />\n        <Rank name={this.state.user.name} entries={this.state.user.entries} />\n        <ImageLinkForm onInputChange={ this.onInputChange } onButtonSubmit={ this.onButtonSubmit }/>\n        <FaceRecognition box={ box }image={ imageURL }/>                  \n      </div>\n    )\n  }\n\n  render(){\n    const { route } = this.state;\n    return(\n      <div style={{display: \"flex\", flexDirection: \"column\"}}>\n        <div>\n          <Particles className=\"particles\" params={ particlesOption } />\n          {\n            route === \"signin\" ?\n            this.mainPage() :\n            (route === \"signout\"? this.signInForm(): this.signUpForm())    \n          }\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}